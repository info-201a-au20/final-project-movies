---
title: "Midpoint Deliverable"
author: "Gisele Fox, Emiri Nishizawa, Melina Perraut, Roshni Srikanth, Ha Nhat To"
date: "Due 11/30/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r include=FALSE}
# source("analysis.R") # source in other script
library("knitr") # load the `knitr` library
library("ggplot2") # load the `ggplot2` library
library("plotly") # load the `plotly` library
library("zoo")
source("./scripts/summary_info.R")
source("./scripts/summary_table_function.R")
source("./scripts/Bargraph.R") # source the scripts we are using
source("./scripts/summary_table_function.R") # source the scripts we are using
source("./scripts/Bargraph.R") 
source("scripts/linegraph_GT.R")
source("./scripts/Scatterplot.R")

# After reading through the canvas assignment, I think we are only supposed
# to read our file one time in the index.Rmd file, and then we are supposed to
# pass it into our individual functions

df <- read.csv("./data/midpoint_df.csv", stringsAsFactors = FALSE)
google_trend_df <- read.csv("data/google_trends_df.csv", stringsAsFactors = FALSE)
```

## Intro
Movies have been an important aspect of society since their creation. They portray issues that reflect our culture and current events, while also providing entertainment. As a society, we have been witnessing the severe impact of the COVID-19 pandemic on the movie industry, from movie theater closures to film releases being delayed or pushed straight to streaming services. This project seeks to investigate the impact that global events - including the COVID-19 pandemic - have had on a variety of factors within the movie industry. The data from this project is mainly taken from the [IMDb Movies Extensive Database](https://www.kaggle.com/stefanoleone992/imdb-extensive-dataset?select=IMDb+movies.csv), and supplemented with the [IMDB 5000 Movie Dataset](https://www.kaggle.com/carolzhangdc/imdb-5000-movie-dataset). Both of these datasets were populated with data from IMDb.

## Summary paragraph (Ha)
``` {r load dataset, echo = FALSE}
midpoint_summary <- get_summary_info(df)
```
The **midpoint_df.csv** is a data set we compiled from the IMDB 5000 Movie Dataset and the IMDB Movies Extensive Database for the purpose of calculation and data visualization in this deliverable. It contains data of `r midpoint_summary$number_of_obs` movies produced in the US or in conjunction with the US from `r midpoint_summary$earliest_year` to `r midpoint_summary$latest_year`. In details, the data set considers `r midpoint_summary$number_of_columns` variables, namely `r midpoint_summary$column_names`.

### Limitations


## Summary table (Emiri)
**About Table:** A lot of our questions revolve around different statistics on movies across different years. Thus, our summary table looks at the number of movies published, average budget, USA gross income and most and least common genre from 1990 to 2020.
<br/> **Insight:** By taking our large data set and summarizing it, we are able to see more specific, cleaned up information. For example, this process revealed that our data pool only had one movie for 1992, which did not report a budget. The table displays trends throughout years as well. From 1993 to 2015, Drama was the most common genre of released movies. There is more variety in the least common genre across the years, however, History seems to come up often. Other than 1992 and 2018, the average budget of movies is in the ten millions. Again, 1992 had only one movie reported with no budget. 2018 has a budget that is significantly less than surrounding years. We can also see that 2020 had a significant decrease in average USA income. Considering the COVID-19 pandemic, global events may have an impact on the movie industry. 
``` {r table, eval=TRUE, echo=FALSE, error=FALSE, message=FALSE, warning=FALSE}
kable(summary_table(df), col.names = summary_column_names, align = "lcrrrr")
```

## Scatterplot (Melina)
**About Scatterplot:** One of the questions we wanted to consider was the popularity of different movie genres over the years, and the below scatterplot answers that question through displaying the average vote (out of 10) for each movie genre from 1990 to 2020. Since most movies in our dataset had multiple genres, the avg_vote for each movie was applied to each of its genres. Please note that the scatterplot is interactive, so you can hover over each of the data points to see the year, average vote, and genre. 
<br/> **Insight:** From the scatterplot, we can see that in 2020 (global event: COVID-19 pandemic), the highest rated genre thus far is Thriller and the lowest rated genre thus far is Mystery. In 2008 (global event: Great Recession), the highest rated genre was Biography and the lowest rated genre was Fantasy. In 2001 (global event: 9/11), the highest rated genre was Musical and the lowest rated genre was Sport. And in 1991 (global event: introduction of the Internet/World Wide Web), the highest rated genre was Biography and the lowest rated genre was Crime.

``` {r scatterplot, eval=TRUE, echo=FALSE, error=FALSE, message=FALSE, warning=FALSE}
ggplotly(get_scatterplot(df))
```

## Bar chart (Roshni)
**About Chart:** One of the questions we wanted to answer for our data was how different national events impacted the movie industry. To answer this, this graph looks at the average revenue brought in by the movie industry by year.
**Insight:** The main years we decided to look at were 1991 (Introduction of the Internet), 2001 (9/11), 2005 (Introduction of Youtube), 2008 (Great Recession), and 2020 (Coronavirus Pandemic). 
```{r eval=TRUE, echo=FALSE, error=FALSE, message=FALSE, warning=FALSE}
ggplotly(get_bar_graph(df))

```

## Line chart (Gisele)
This line graph depicts the search results of 5 pandemic related movies relative to the highest point on the chart for their given time frame. I chose this chart because it clearly shows the popularity of these movies over time (from one year after their release date to November 2020) and helps give a sense of how quarantine brought these movies back into the spotlight. From this graph we an clearly see a boost in attention towards movies that deal with a pandemic in March 2020, even if they are more fiction than what could happen in reality (see I am Legend and 28 days later that are notably zombie movies). Every movie's search results more than double in March of 2020 relative to November 2019 with Contagion coming in as the most different with a 9900% increase in that time frame. With respects to how this chart displays data it's clear to see that the month that these movies have been searched the most, after the year following it's release date, has been the month that the United States started implementing quarantine orders to get people to stay inside.
```{r eval=TRUE, echo=FALSE, error=FALSE, message=FALSE, warning=FALSE}
ggplotly(get_line_graph_GT(google_trend_df))

```